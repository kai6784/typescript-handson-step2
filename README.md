# 0 から始める TypeScript(応用編)

## はじめに

**TypeScript の応用編** ということで、実際に API 経由で取得するデータに型を付与したり、
コンポーネント間のデータの受け渡しに型を与えることでどんなメリットがあるのか体感しよう。

今回は **React** で実践しますが、現在主流になっている他のフレームワーク/ライブラリを用いても同じような恩恵が受けられます。

書き方をマスターすることを目的とするのではなく、まずは **こういうことができるんだ** というのを知ることをゴールとしましょう。

## エディターを開く

[https://codesandbox.io/s/typescript-handson-step2-6mv6t?fontsize=14&hidenavigation=1&theme=dark](https://codesandbox.io/s/typescript-handson-step2-6mv6t?fontsize=14&hidenavigation=1&theme=dark)

CodeSandbox という上記の WEB エディターを使用します。
それぞれ修正、保存等してもらっても他の人には影響ないので安心してください。

## 軽くコードの説明＆動作確認

今回使用するのはボタンを押下したらネット上に置いてあるデータを取ってきて画面に表示するというシンプルなものです。

おや、何やら表示がおかしいですね。どうやらバグっているようです。

型パワーで解決していきましょう。

## 取得するデータ(json)

今回取得するのは下記のユーザー情報です。

[http://myjson.com/13tbi2](http://myjson.com/13tbi2)

- ID(id)
- 名前(name)
- 年齢(age)
- パーソナルカラー(personalColor)

## バグの原因を探る

どうやら表示されるはずの名前が表示されていないようです。
テストで気づけや〜って話ですが、仕方ないのでバグの原因を探ります。

```
<div key={obj.id}>
  <ListItem id={obj.id} name={obj.nama} age={obj.age} />
</div>
```

App.tsx のここですね〜 **name** というプロパティ名を **nama** とタイポ(打ち間違い)してしまってます。

こんなしょーもないミスは型が全て解決してくれるのだ。

## ユーザー情報の型を定義する

では今回 API でやりとりしているユーザー情報の型を定義していきましょう。

Let's ハンズオン！！

## 型を付与したことでタイポがエラーになることを確認

これで先程のようなミスもなくなるし、プロパティの候補も出してくれるようになりました。

TypeScript 最高でしょ？

## 上司「文字色はパーソナルカラーにしてくれへんか〜？？」

おっと、面倒なことを上司が言ってきました。
そもそもパーソナルカラーってなんやねん。

まぁ仕事なんで対応しましょう。

ListItem コンポーネントを修正していきます。

Let's ハンズオン！！

## 修正したコンポーネントを呼び出す

YOU「よし、コンポーネントの修正は終わった。呼び出し側の修正は新人君に任せるか」

新人君になったつもりで Let's ハンズオン！！

新人君「先輩！色が変わりません！！」

## コンポーネントへ渡す値(props)にも型をつけてミスをなくそう

自分でコンポーネントも修正して影響箇所も自分で修正するならミスは起きないかもしれません。
けれど、自分が書いたコードも時間が経てば忘れるし、ほとんどの場合システム開発は複数人でやるものなので、このような認識の齟齬は起きがちです。

そんな時にも型の出番です。

Let's ハンズオン！！

## 絶対渡さないといけないんすか？

YOU「よし、型パワーで素敵なコンポーネントができあがったな。これで呼び出し側が間違えることはないだろう。なんて優しいんだ自分」

新人君「先輩！パーソナルカラーってない人とかもいるじゃないっすか！そーゆー人もわざわざ"black"とかで渡さないといけないんすか？めんどくさくないっすか！？」

YOU「こいつへの口の聞き方は後日ゆっくり教えるとして、確かにパーソナルカラーは必須の props とする程でもないか。。。」

TypeScript には「存在する場合はこの型です。なくても良いよ」という定義の仕方もあります。よく使うので覚えておきましょう。

Let's ハンズオン！！

## 同じのあるくないっすか？

YOU「さぁこれでパーソナルカラーは渡さなくてもエラーにならないし、デフォルトで黒だ。文句ないだろう」

新人君「あざーす！ただ、もう１つ思ったんすけどこの Users って Type、App にも ListItem にも書いてるじゃないっすか？？」

新人君「項目変わったときってどっちも修正するんすか？」

新人君「自分そんなしょーもないことで残業したくないんすけど！」

YOU「こいつ口は悪い癖にめっちゃ的確なこと言ってくるから嫌い、、、」

型情報は色々なコンポーネントから参照することが多いので、別ファイルに分けておいて呼び出して使うことが多いです。

必ずしも全ての型を切り出す必要はないですが、今回のようなケースでは分けた方が良さそうです。

Let's ハンズオン！！

## TypeScript 最高

以上、TypeScript ハンズオンでした！

型を付与することで複数人での DX(Developer Experience)はかなり向上します。
自分で何かつくるときも是非 TypeScript を導入してみてください。

＼ Happy Type Life ／
